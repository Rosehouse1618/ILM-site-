<!-- Document Management Section -->
<div class="main-panel">
  <!-- Panel Header -->
  <div class="panel-header">
    <h2 class="panel-title">ğŸ“„ Document Management</h2>
    <div class="header-actions">
      <button class="btn btn-outline" onclick="showDocumentStats()">
        ğŸ“Š Statistics
      </button>
      <button class="btn btn-secondary" onclick="showBulkDocumentActions()">
        ğŸ“‹ Bulk Actions
      </button>
      <button class="btn btn-primary" onclick="refreshDocuments()">
        ğŸ”„ Refresh
      </button>
    </div>
  </div>

  <!-- Document Statistics Cards -->
  <div id="documentStatsCards" class="stats-cards-container" style="display: none;">
    <div class="stat-card-mini">
      <div class="stat-icon">ğŸ“„</div>
      <div class="stat-content">
        <div class="stat-number" id="totalDocumentsCount">0</div>
        <div class="stat-label">Total Documents</div>
      </div>
    </div>
    <div class="stat-card-mini">
      <div class="stat-icon">ğŸŒ</div>
      <div class="stat-content">
        <div class="stat-number" id="sharedDocumentsCount">0</div>
        <div class="stat-label">Shared Documents</div>
      </div>
    </div>
    <div class="stat-card-mini">
      <div class="stat-icon">ğŸ‘¤</div>
      <div class="stat-content">
        <div class="stat-number" id="personalDocumentsCount">0</div>
        <div class="stat-label">Personal Documents</div>
      </div>
    </div>
    <div class="stat-card-mini">
      <div class="stat-icon">ğŸ’¾</div>
      <div class="stat-content">
        <div class="stat-number" id="totalStorageUsed">0 MB</div>
        <div class="stat-label">Storage Used</div>
      </div>
    </div>
    <div class="stat-card-mini">
      <div class="stat-icon">ğŸ </div>
      <div class="stat-content">
        <div class="stat-number" id="roomsWithDocuments">0</div>
        <div class="stat-label">Rooms with Documents</div>
      </div>
    </div>
  </div>

  <!-- Document Upload Form -->
  <div class="document-upload-section">
    <div class="section-header-with-toggle">
      <h3>ğŸ“¤ Upload New Document</h3>
      <button class="toggle-btn" onclick="toggleUploadForm()">
        <span id="uploadToggleIcon">â–¼</span>
      </button>
    </div>
    <div id="uploadFormContainer" class="upload-form-container">
      <form id="documentUploadForm" class="document-upload-form">
        <div class="form-row">
          <div class="form-group">
            <label for="documentTitle">ğŸ“ Document Title *</label>
            <input type="text" id="documentTitle" name="title" required 
                   placeholder="Enter descriptive document title">
          </div>
          <div class="form-group">
            <label for="documentFile">ğŸ“ Select File *</label>
            <div class="file-input-wrapper">
              <input type="file" id="documentFile" name="file" required 
                     accept=".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png,.xls,.xlsx,.ppt,.pptx,.zip,.rar"
                     onchange="handleFileSelect(this)">
              <div class="file-input-display">
                <span id="fileNameDisplay">No file selected</span>
                <span id="fileSizeDisplay"></span>
              </div>
            </div>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="documentDescription">ğŸ“‹ Description (Optional)</label>
            <textarea id="documentDescription" name="description" 
                      placeholder="Add a brief description of this document" rows="3"></textarea>
          </div>
          <div class="form-group">
            <label for="documentCategory">ğŸ·ï¸ Category</label>
            <select id="documentCategory" name="category">
              <option value="">Select Category</option>
              <option value="contracts">ğŸ“„ Contracts & Agreements</option>
              <option value="policies">ğŸ“‹ Policies & Rules</option>
              <option value="forms">ğŸ“ Forms & Applications</option>
              <option value="notices">ğŸ“¢ Notices & Announcements</option>
              <option value="receipts">ğŸ§¾ Receipts & Invoices</option>
              <option value="maintenance">ğŸ”§ Maintenance & Repairs</option>
              <option value="other">ğŸ“‚ Other</option>
            </select>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <div class="document-type-selection">
              <label class="radio-label">
                <input type="radio" name="documentType" value="shared" id="sharedDocumentRadio" checked>
                <span class="radio-custom"></span>
                <span class="radio-text">ğŸŒ Shared Document (visible to all students)</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="documentType" value="personal" id="personalDocumentRadio">
                <span class="radio-custom"></span>
                <span class="radio-text">ğŸ‘¤ Personal Document (specific student only)</span>
              </label>
            </div>
          </div>
          <div class="form-group" id="roomNumberGroup" style="display: none;">
            <label for="roomNumber">ğŸ  Room Number *</label>
            <select id="roomNumber" name="roomNumber" required>
              <option value="">Select Room Number</option>
              <!-- Room options will be populated by JavaScript -->
            </select>
            <small class="form-help">Required for personal documents</small>
          </div>
        </div>
        <div class="form-submit">
          <button type="submit" class="btn btn-primary" id="uploadDocumentBtn">
            <span class="btn-icon">ğŸ“¤</span>
            <span class="btn-text">Upload Document</span>
            <span class="btn-loading" style="display: none;">
              <span class="loading-spinner-small"></span>
              Uploading...
            </span>
          </button>
          <button type="button" class="btn btn-secondary" onclick="clearUploadForm()">
            ğŸ—‘ï¸ Clear Form
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Documents List -->
  <div class="documents-list-section">
    <div class="section-header-with-actions">
      <h3>ğŸ“‚ Document Library</h3>
      <div class="view-options">
        <button class="view-btn active" onclick="setDocumentView('table')" data-view="table">
          ğŸ“‹ Table
        </button>
        <button class="view-btn" onclick="setDocumentView('grid')" data-view="grid">
          ğŸ”² Grid
        </button>
      </div>
    </div>
    
    <!-- Enhanced Search and Filter Bar -->
    <div class="search-filter-bar enhanced">
      <div class="search-group">
        <div class="search-input-wrapper">
          <input type="text" class="search-box" placeholder="Search documents by title, room, or description..." 
                 id="documentSearchInput" onkeyup="filterDocuments()">
          <button class="search-clear-btn" onclick="clearDocumentSearch()" style="display: none;">âœ•</button>
        </div>
      </div>
      <div class="filter-group">
        <select class="filter-select" id="documentTypeFilter" onchange="filterDocuments()">
          <option value="">ğŸ“„ All Types</option>
          <option value="shared">ğŸŒ Shared Documents</option>
          <option value="personal">ğŸ‘¤ Personal Documents</option>
        </select>
        <select class="filter-select" id="documentCategoryFilter" onchange="filterDocuments()">
          <option value="">ğŸ·ï¸ All Categories</option>
          <option value="contracts">ğŸ“„ Contracts</option>
          <option value="policies">ğŸ“‹ Policies</option>
          <option value="forms">ğŸ“ Forms</option>
          <option value="notices">ğŸ“¢ Notices</option>
          <option value="receipts">ğŸ§¾ Receipts</option>
          <option value="maintenance">ğŸ”§ Maintenance</option>
          <option value="other">ğŸ“‚ Other</option>
        </select>
        <select class="filter-select" id="documentRoomFilter" onchange="filterDocuments()">
          <option value="">ğŸ  All Rooms</option>
          <!-- Room filter options will be populated by JavaScript -->
        </select>
        <select class="filter-select" id="documentSortFilter" onchange="filterDocuments()">
          <option value="newest">ğŸ“… Newest First</option>
          <option value="oldest">ğŸ“… Oldest First</option>
          <option value="title">ğŸ”¤ Title A-Z</option>
          <option value="size">ğŸ’¾ File Size</option>
        </select>
      </div>
      <div class="action-group">
        <button class="btn btn-outline" onclick="exportDocumentsList()">
          ğŸ“Š Export List
        </button>
        <button class="btn btn-outline" onclick="toggleDocumentSelection()">
          â˜‘ï¸ Select All
        </button>
      </div>
    </div>
    
    <!-- Document View Container -->
    <div id="documentViewContainer">
      <!-- Table View -->
      <div id="documentTableView" class="documents-table-container">
        <table class="applications-table enhanced-table">
          <thead>
            <tr>
              <th width="30">
                <input type="checkbox" id="selectAllDocuments" onchange="toggleAllDocumentSelection()">
              </th>
              <th width="40">ğŸ“„</th>
              <th>Title & Description</th>
              <th>Type & Category</th>
              <th>Room</th>
              <th>File Info</th>
              <th>Upload Date</th>
              <th width="120">Actions</th>
            </tr>
          </thead>
          <tbody id="documentsTableBody">
            <tr>
              <td colspan="8" class="loading">
                <div class="loading-spinner"></div>
                <span>Loading documents...</span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Grid View -->
      <div id="documentGridView" class="documents-grid-container" style="display: none;">
        <div id="documentsGridBody" class="documents-grid">
          <!-- Grid items will be populated here -->
        </div>
      </div>
    </div>

    <!-- Bulk Actions Bar -->
    <div id="bulkActionsBar" class="bulk-actions-bar" style="display: none;">
      <div class="bulk-actions-content">
        <span id="selectedDocumentsCount">0 documents selected</span>
        <div class="bulk-actions-buttons">
          <button class="btn btn-secondary" onclick="downloadSelectedDocuments()">
            ğŸ“¥ Download Selected
          </button>
          <button class="btn btn-info" onclick="moveSelectedDocuments()">
            ğŸ“ Move/Copy
          </button>
          <button class="btn btn-danger" onclick="deleteSelectedDocuments()">
            ğŸ—‘ï¸ Delete Selected
          </button>
          <button class="btn btn-outline" onclick="clearDocumentSelection()">
            âœ• Clear Selection
          </button>
        </div>
      </div>
    </div>
  </div>
</div>